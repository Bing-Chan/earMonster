(function(n,f){typeof exports=="object"&&typeof module!="undefined"?module.exports=f(require("vue")):typeof define=="function"&&define.amd?define(["vue"],f):(n=typeof globalThis!="undefined"?globalThis:n||self,n.introStep=f(n.Vue))})(this,function(n){"use strict";const f={show:{type:Boolean,required:!0},config:{type:Object,required:!0}};var B=Object.defineProperty,E=Object.defineProperties,S=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,w=(t,o,e)=>o in t?B(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,$=(t,o)=>{for(var e in o||(o={}))b.call(o,e)&&w(t,e,o[e]);if(y)for(var e of y(o))I.call(o,e)&&w(t,e,o[e]);return t},k=(t,o)=>E(t,S(o)),m=(t,o,e)=>new Promise((x,c)=>{var h=a=>{try{g(e.next(a))}catch(u){c(u)}},r=a=>{try{g(e.throw(a))}catch(u){c(u)}},g=a=>a.done?x(a.value):Promise.resolve(a.value).then(h,r);g((e=e.apply(t,o)).next())}),p=n.defineComponent({name:"GaIntroStep",props:f,emits:["update:show"],setup(t,{emit:o}){const e=n.reactive({config:t.config,show:t.show,originalBox:{left:250,top:250,width:200,height:100},tipBoxPosition:"bottom",currentIndex:0}),x=()=>m(this,null,function*(){let i=!0;if(e.config.tips[e.currentIndex]&&e.config.tips[e.currentIndex].onPrev&&(i=yield e.config.tips[e.currentIndex].onPrev()),!i)throw new Error("onPrev \u9700\u8981 Promise.resolve(true) \u624D\u53EF\u4EE5\u7EE7\u7EED\u5F80\u4E0B\u8D70");c(e.currentIndex-1)}),c=i=>m(this,null,function*(){try{debugger;i===void 0&&(i=e.currentIndex),e.show&&(document.body.style.overflow="hidden");let d=e.config.tips[i].el,l=document.querySelector(d);if(!l)throw new Error("\u6CA1\u6709\u627E\u5230\u76F8\u5E94\u7684\u5143\u7D20");let s=l.getBoundingClientRect();e.originalBox={left:s.left,top:s.top,width:s.width,height:s.height},e.tipBoxPosition=e.config.tips[i].tipPosition,e.currentIndex=i}catch(d){throw new Error(d.message)}}),h=()=>m(this,null,function*(){debugger;let i=!0;if(e.config.tips[e.currentIndex]&&e.config.tips[e.currentIndex].onNext&&(i=yield e.config.tips[e.currentIndex].onNext()),!i)throw new Error("onNext \u9700\u8981 Promise.resolve(true) \u624D\u53EF\u4EE5\u7EE7\u7EED\u5F80\u4E0B\u8D70");c(e.currentIndex+1)}),r=()=>{debugger;o("update:show",!1)},g=()=>{debugger;const{tips:i}=e.config;let d=null;if(i&&Array.isArray(i))if(i.length>0){e.currentIndex=0;try{let l=document.querySelector(i[0].el);d=setInterval(()=>{l=document.querySelector(i[0].el),l&&(c(0),clearInterval(d))},0)}catch(l){throw new Error(l.message)}}else throw new Error("tips\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A");else throw new Error("config\u4E2D\u7684tips\u4E0D\u5B58\u5728\u6216\u8005\u4E0D\u662F\u6570\u7EC4")};n.watch(()=>e.config,()=>{e.currentIndex=0}),n.watch(()=>e.show,i=>{i?c():document.body.style.overflow="auto"}),n.watchEffect(()=>{e.show=t.show});const a=n.computed(()=>{if(e.tipBoxPosition==="right")return{left:`${e.originalBox.left+e.originalBox.width}px`,top:`${e.originalBox.top}px`};if(e.tipBoxPosition==="left")return{right:`${window.innerWidth-e.originalBox.left}px`,top:`${e.originalBox.top}px`};if(e.tipBoxPosition==="top")return{left:`${e.originalBox.left}px`,bottom:`${window.innerHeight-e.originalBox.top}px`};if(e.tipBoxPosition==="bottom")return{left:`${e.originalBox.left>window.innerWidth-300?window.innerWidth-300:e.originalBox.left}px`,top:`${e.originalBox.top+e.originalBox.height}px`}});n.onBeforeMount(()=>{g()});const u=(i,d)=>{let l=null,s=!0;return(...D)=>{if(!s)return;s=!1;let A=D;l&&clearTimeout(l),l=setTimeout(()=>{s=!0,i.apply(this,A)},d||1e3)}};return n.onMounted(()=>{window.onresize=u(()=>{e.show&&c()},0)}),k($({},n.toRefs(e)),{init:g,prev:x,next:h,done:r,tipBoxStyle:a,setBoxInfo:c})}});const N=t=>(n.pushScopeId("data-v-5033ea2c"),t=t(),n.popScopeId(),t),P={key:0,id:"intro_box"},C=N(()=>n.createElementVNode("div",{class:"round round-flicker"},null,-1)),V=[C],O={class:"tip-content"},_={class:"action"};function z(t,o,e,x,c,h){return n.openBlock(),n.createBlock(n.Transition,{name:"custom-classes-transition","enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:n.withCtx(()=>[t.show?(n.openBlock(),n.createElementBlock("div",P,[n.createElementVNode("div",{class:"top",style:n.normalizeStyle({height:`${t.originalBox.top}px`,backgroundColor:`rgba(0, 0, 0, ${t.config.backgroundOpacity?t.config.backgroundOpacity:.9})`})},null,4),n.createElementVNode("div",{class:"content",style:n.normalizeStyle({height:`${t.originalBox.height}px`})},[n.createElementVNode("div",{class:"left",style:n.normalizeStyle({top:`${t.originalBox.top}px`,width:`${t.originalBox.left}px`,height:`${t.originalBox.height}px`,backgroundColor:`rgba(0, 0, 0, ${t.config.backgroundOpacity?t.config.backgroundOpacity:.9})`})},null,4),n.createElementVNode("div",{class:"original-box",style:n.normalizeStyle({top:`${t.originalBox.top}px`,left:`${t.originalBox.left}px`,width:`${t.originalBox.width}px`,height:`${t.originalBox.height}px`})},V,4),n.createElementVNode("div",{class:"tip-box",style:n.normalizeStyle(t.tipBoxStyle)},[n.createElementVNode("div",O,[t.config.tips[t.currentIndex].title?(n.openBlock(),n.createElementBlock("div",{key:0,class:"title",style:n.normalizeStyle({textAlign:t.config.titleStyle&&t.config.titleStyle.textAlign?t.config.titleStyle.textAlign:"center",fontSize:t.config.titleStyle&&t.config.titleStyle.fontSize?t.config.titleStyle.fontSize:"19px"})},n.toDisplayString(t.config.tips[t.currentIndex].title),5)):n.createCommentVNode("v-if",!0),n.createElementVNode("div",{class:"content",style:n.normalizeStyle({textAlign:t.config.contentStyle&&t.config.contentStyle.textAlign?t.config.contentStyle.textAlign:"center",fontSize:t.config.contentStyle&&t.config.contentStyle.fontSize?t.config.contentStyle.fontSize:"15px"})},n.toDisplayString(t.config.tips[t.currentIndex].content),5),n.createElementVNode("div",_,[t.currentIndex!==0?n.renderSlot(t.$slots,"prev",{key:0,index:t.currentIndex,tipItem:t.config.tips[t.currentIndex]},()=>[n.createElementVNode("div",{class:"item prev",onClick:o[0]||(o[0]=(...r)=>t.prev&&t.prev(...r))},"\u4E0A\u4E00\u6B65")]):n.createCommentVNode("v-if",!0),t.currentIndex!==t.config.tips.length-1?n.renderSlot(t.$slots,"next",{key:1,index:t.currentIndex,tipItem:t.config.tips[t.currentIndex]},()=>[n.createElementVNode("div",{class:"item next",onClick:o[1]||(o[1]=(...r)=>t.next&&t.next(...r))},"\u4E0B\u4E00\u6B65")]):n.createCommentVNode("v-if",!0),t.currentIndex===t.config.tips.length-1?n.renderSlot(t.$slots,"done",{key:2,index:t.currentIndex,tipItem:t.config.tips[t.currentIndex]},()=>[n.createElementVNode("div",{class:"item done",onClick:o[2]||(o[2]=(...r)=>t.done&&t.done(...r))},"\u5B8C\u6210")]):n.renderSlot(t.$slots,"skip",{key:3,index:t.currentIndex,tipItem:t.config.tips[t.currentIndex]},()=>[n.createElementVNode("div",{class:"item skip",onClick:o[3]||(o[3]=(...r)=>t.done&&t.done(...r))},"\u8DF3\u8FC7")])])])],4),n.createElementVNode("div",{class:"right",style:n.normalizeStyle({top:`${t.originalBox.top}px`,left:`${t.originalBox.left+t.originalBox.width}px`,width:`calc(100% - ${t.originalBox.left+t.originalBox.width}px)`,height:`${t.originalBox.height}px`,backgroundColor:`rgba(0, 0, 0, ${t.config.backgroundOpacity?t.config.backgroundOpacity:.9})`}),ref:"tip_box"},null,4)],4),n.createElementVNode("div",{class:"bottom",style:n.normalizeStyle({height:`calc(100% - ${t.originalBox.top}px - ${t.originalBox.height}px)`,backgroundColor:`rgba(0, 0, 0, ${t.config.backgroundOpacity?t.config.backgroundOpacity:.9})`})},null,4)])):n.createCommentVNode("v-if",!0)]),_:3})}return p.render=z,p.__scopeId="data-v-5033ea2c",p.__file="packages/components/introStep/introStep.vue",p.install=t=>{t.component(p.name,p)},p});
