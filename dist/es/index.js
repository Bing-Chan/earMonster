import{defineComponent as P,computed as A,openBlock as B,createElementBlock as _,normalizeClass as V,normalizeStyle as h,renderSlot as I,createElementVNode as u,reactive as ge,watch as J,watchEffect as ve,onBeforeMount as he,onMounted as U,toRefs as me,pushScopeId as xe,popScopeId as ye,createBlock as we,Transition as be,withCtx as ke,toDisplayString as H,createCommentVNode as D,ref as j,onUnmounted as Be,unref as L,withDirectives as $e,vShow as Ee}from"vue";import{ref as Se,computed as _e,watch as K,unref as R}from"vue-demi";const Ie=["default","primary","success","warning","info","danger","text",""],Ce={type:{type:String,values:Ie,default:"default"},disabled:{type:Boolean,default:!1},round:Boolean,color:String},Pe={click:e=>e instanceof MouseEvent},O=typeof window!="undefined";function Ae(e){var n;const t=R(e);return(n=t==null?void 0:t.$el)!=null?n:t}const Oe=O?window:void 0;O&&window.document,O&&window.navigator,O&&window.location;const T=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},M="__vueuse_ssr_handlers__";T[M]=T[M]||{},T[M];function Q(e,n,{window:t=Oe}={}){const a=Se(""),r=_e(()=>{var i;return Ae(n)||((i=t==null?void 0:t.document)==null?void 0:i.documentElement)});return K([r,()=>R(e)],([i,o])=>{i&&t&&(a.value=t.getComputedStyle(i).getPropertyValue(o))},{immediate:!0}),K(a,i=>{var o;((o=r.value)==null?void 0:o.style)&&r.value.style.setProperty(R(e),i)}),a}var Z,ee;O&&(window==null?void 0:window.navigator)&&((Z=window==null?void 0:window.navigator)==null?void 0:Z.platform)&&/iP(ad|hone|od)/.test((ee=window==null?void 0:window.navigator)==null?void 0:ee.platform);var De=Object.defineProperty,te=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,ne=(e,n,t)=>n in e?De(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Fe=(e,n)=>{for(var t in n||(n={}))qe.call(n,t)&&ne(e,t,n[t]);if(te)for(var t of te(n))Ne.call(n,t)&&ne(e,t,n[t]);return e};const Ge={top:0,left:0,bottom:0,right:0,height:0,width:0};Fe({text:""},Ge);function je(e){let n=e.trim().replace("#","");return/^[0-9a-fA-F]{3}$/.test(n)&&(n=n[0].repeat(2)+n[1].repeat(2)+n[2].repeat(2)),/^[0-9a-fA-F]{6}$/.test(n)?{red:parseInt(n.slice(0,2),16),green:parseInt(n.slice(2,4),16),blue:parseInt(n.slice(4,6),16)}:{red:255,green:255,blue:255}}function oe(e,n=.2){let{red:t,green:a,blue:r}=je(e);if(n>0)t*=1-n,a*=1-n,r*=1-n;else{const i=Math.abs(n);t+=(255-t)*Math.abs(n),a+=(255-a)*i,r+=(255-r)*i}return`rgb(${Math.round(t)}, ${Math.round(a)}, ${Math.round(r)})`}function q(e,n=.2){return oe(e,-n)}function Le(e,n=.2){return oe(e,n)}var $=P({name:"GaButton",props:Ce,emits:Pe,setup(e,{emit:n}){const t=i=>{n("click",i)},a=A(()=>{debugger;const i=e.type||"default",o=["ga-button",i?"ga-button--"+i:"",{"is-disabled":e.disabled,"is-round":e.round}];return console.log(o,"classArr"),o}),r=A(()=>{let i={};const o=Q(`--d-color-${e.type}`),s=e.color||o.value;if(s){const d=Le(s,.1),m=q(s);if(i={"--d-button-bg-color":s,"--d-button-border-color":s,"--d-button-hover-bg-color":m,"--d-button-hover-border-color":m,"--d-button-active-bg-color":d,"--d-button-active-border-color":d},e.disabled){const l=q(s,.5);i["--d-button-disabled-bg-color"]=l,i["--d-button-disabled-border-color"]=l}}return i});return{handleClick:t,className:a,style:r}}});const Re=["autofocus"];function Te(e,n,t,a,r,i){return B(),_("button",{class:V(e.className),value:111,style:h(e.style),onClick:n[0]||(n[0]=(...o)=>e.handleClick&&e.handleClick(...o)),autofocus:e.autofocus},[I(e.$slots,"default")],14,Re)}$.render=Te,$.__file="packages/components/button/button.vue",$.install=e=>{e.component($.name,$)};const Me=["default","primary","success","warning","info","danger","text",""],Xe={type:{type:String,values:Me,default:"default"},disabled:{type:Boolean,default:!1},underline:{type:Boolean,default:!0},href:{type:String,default:""}},Ye={click:e=>e instanceof MouseEvent};var E=P({name:"GaLink",props:Xe,emits:Ye,setup(e,{emit:n}){const t=e.type||"default",a=A(()=>["ga-link",t?"d-link--"+t:"",{"is-disabled":e.disabled,"is-underline":!e.disabled&&e.underline}]),r=A(()=>{let o={};const s=Q(`--d-color-${e.type}`).value;if(s&&(o={"--d-link-hover-text-color":q(s)},e.disabled)){const d=q(s,.5);o["--d-link-disabled-text-color"]=d}return o});function i(o){e.disabled||n("click",o)}return{className:a,handleClick:i,style:r}}});const ze=["href"],We={class:"d-link-inner"};function Ve(e,n,t,a,r,i){return B(),_("a",{class:V(e.className),href:e.disabled||!e.href?void 0:e.href,style:h(e.style),onClick:n[0]||(n[0]=(...o)=>e.handleClick&&e.handleClick(...o))},[u("span",We,[I(e.$slots,"default")])],14,ze)}E.render=Ve,E.__file="packages/components/link/link.vue",E.install=e=>{e.component(E.name,E)};const Je={show:{type:Boolean,required:!0},config:{type:Object,required:!0}};var Ue=Object.defineProperty,He=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable,re=(e,n,t)=>n in e?Ue(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,et=(e,n)=>{for(var t in n||(n={}))Qe.call(n,t)&&re(e,t,n[t]);if(ie)for(var t of ie(n))Ze.call(n,t)&&re(e,t,n[t]);return e},tt=(e,n)=>He(e,Ke(n)),X=(e,n,t)=>new Promise((a,r)=>{var i=d=>{try{s(t.next(d))}catch(m){r(m)}},o=d=>{try{s(t.throw(d))}catch(m){r(m)}},s=d=>d.done?a(d.value):Promise.resolve(d.value).then(i,o);s((t=t.apply(e,n)).next())}),b=P({name:"GaIntroStep",props:Je,emits:["update:show"],setup(e,{emit:n}){const t=ge({config:e.config,show:e.show,originalBox:{left:250,top:250,width:200,height:100},tipBoxPosition:"bottom",currentIndex:0}),a=()=>X(this,null,function*(){let l=!0;if(t.config.tips[t.currentIndex]&&t.config.tips[t.currentIndex].onPrev&&(l=yield t.config.tips[t.currentIndex].onPrev()),!l)throw new Error("onPrev \u9700\u8981 Promise.resolve(true) \u624D\u53EF\u4EE5\u7EE7\u7EED\u5F80\u4E0B\u8D70");r(t.currentIndex-1)}),r=l=>X(this,null,function*(){try{debugger;l===void 0&&(l=t.currentIndex),t.show&&(document.body.style.overflow="hidden");let v=t.config.tips[l].el,f=document.querySelector(v);if(!f)throw new Error("\u6CA1\u6709\u627E\u5230\u76F8\u5E94\u7684\u5143\u7D20");let c=f.getBoundingClientRect();t.originalBox={left:c.left,top:c.top,width:c.width,height:c.height},t.tipBoxPosition=t.config.tips[l].tipPosition,t.currentIndex=l}catch(v){throw new Error(v.message)}}),i=()=>X(this,null,function*(){debugger;let l=!0;if(t.config.tips[t.currentIndex]&&t.config.tips[t.currentIndex].onNext&&(l=yield t.config.tips[t.currentIndex].onNext()),!l)throw new Error("onNext \u9700\u8981 Promise.resolve(true) \u624D\u53EF\u4EE5\u7EE7\u7EED\u5F80\u4E0B\u8D70");r(t.currentIndex+1)}),o=()=>{debugger;n("update:show",!1)},s=()=>{debugger;const{tips:l}=t.config;let v=null;if(l&&Array.isArray(l))if(l.length>0){t.currentIndex=0;try{let f=document.querySelector(l[0].el);v=setInterval(()=>{f=document.querySelector(l[0].el),f&&(r(0),clearInterval(v))},0)}catch(f){throw new Error(f.message)}}else throw new Error("tips\u6570\u7EC4\u4E0D\u80FD\u4E3A\u7A7A");else throw new Error("config\u4E2D\u7684tips\u4E0D\u5B58\u5728\u6216\u8005\u4E0D\u662F\u6570\u7EC4")};J(()=>t.config,()=>{t.currentIndex=0}),J(()=>t.show,l=>{l?r():document.body.style.overflow="auto"}),ve(()=>{t.show=e.show});const d=A(()=>{if(t.tipBoxPosition==="right")return{left:`${t.originalBox.left+t.originalBox.width}px`,top:`${t.originalBox.top}px`};if(t.tipBoxPosition==="left")return{right:`${window.innerWidth-t.originalBox.left}px`,top:`${t.originalBox.top}px`};if(t.tipBoxPosition==="top")return{left:`${t.originalBox.left}px`,bottom:`${window.innerHeight-t.originalBox.top}px`};if(t.tipBoxPosition==="bottom")return{left:`${t.originalBox.left>window.innerWidth-300?window.innerWidth-300:t.originalBox.left}px`,top:`${t.originalBox.top+t.originalBox.height}px`}});he(()=>{s()});const m=(l,v)=>{let f=null,c=!0;return(...p)=>{if(!c)return;c=!1;let x=p;f&&clearTimeout(f),f=setTimeout(()=>{c=!0,l.apply(this,x)},v||1e3)}};return U(()=>{window.onresize=m(()=>{t.show&&r()},0)}),tt(et({},me(t)),{init:s,prev:a,next:i,done:o,tipBoxStyle:d,setBoxInfo:r})}});const nt=e=>(xe("data-v-5033ea2c"),e=e(),ye(),e),ot={key:0,id:"intro_box"},it=nt(()=>u("div",{class:"round round-flicker"},null,-1)),rt=[it],lt={class:"tip-content"},at={class:"action"};function ut(e,n,t,a,r,i){return B(),we(be,{name:"custom-classes-transition","enter-active-class":"animate__animated animate__fadeIn animate__faster","leave-active-class":"animate__animated animate__fadeOut animate__faster"},{default:ke(()=>[e.show?(B(),_("div",ot,[u("div",{class:"top",style:h({height:`${e.originalBox.top}px`,backgroundColor:`rgba(0, 0, 0, ${e.config.backgroundOpacity?e.config.backgroundOpacity:.9})`})},null,4),u("div",{class:"content",style:h({height:`${e.originalBox.height}px`})},[u("div",{class:"left",style:h({top:`${e.originalBox.top}px`,width:`${e.originalBox.left}px`,height:`${e.originalBox.height}px`,backgroundColor:`rgba(0, 0, 0, ${e.config.backgroundOpacity?e.config.backgroundOpacity:.9})`})},null,4),u("div",{class:"original-box",style:h({top:`${e.originalBox.top}px`,left:`${e.originalBox.left}px`,width:`${e.originalBox.width}px`,height:`${e.originalBox.height}px`})},rt,4),u("div",{class:"tip-box",style:h(e.tipBoxStyle)},[u("div",lt,[e.config.tips[e.currentIndex].title?(B(),_("div",{key:0,class:"title",style:h({textAlign:e.config.titleStyle&&e.config.titleStyle.textAlign?e.config.titleStyle.textAlign:"center",fontSize:e.config.titleStyle&&e.config.titleStyle.fontSize?e.config.titleStyle.fontSize:"19px"})},H(e.config.tips[e.currentIndex].title),5)):D("v-if",!0),u("div",{class:"content",style:h({textAlign:e.config.contentStyle&&e.config.contentStyle.textAlign?e.config.contentStyle.textAlign:"center",fontSize:e.config.contentStyle&&e.config.contentStyle.fontSize?e.config.contentStyle.fontSize:"15px"})},H(e.config.tips[e.currentIndex].content),5),u("div",at,[e.currentIndex!==0?I(e.$slots,"prev",{key:0,index:e.currentIndex,tipItem:e.config.tips[e.currentIndex]},()=>[u("div",{class:"item prev",onClick:n[0]||(n[0]=(...o)=>e.prev&&e.prev(...o))},"\u4E0A\u4E00\u6B65")]):D("v-if",!0),e.currentIndex!==e.config.tips.length-1?I(e.$slots,"next",{key:1,index:e.currentIndex,tipItem:e.config.tips[e.currentIndex]},()=>[u("div",{class:"item next",onClick:n[1]||(n[1]=(...o)=>e.next&&e.next(...o))},"\u4E0B\u4E00\u6B65")]):D("v-if",!0),e.currentIndex===e.config.tips.length-1?I(e.$slots,"done",{key:2,index:e.currentIndex,tipItem:e.config.tips[e.currentIndex]},()=>[u("div",{class:"item done",onClick:n[2]||(n[2]=(...o)=>e.done&&e.done(...o))},"\u5B8C\u6210")]):I(e.$slots,"skip",{key:3,index:e.currentIndex,tipItem:e.config.tips[e.currentIndex]},()=>[u("div",{class:"item skip",onClick:n[3]||(n[3]=(...o)=>e.done&&e.done(...o))},"\u8DF3\u8FC7")])])])],4),u("div",{class:"right",style:h({top:`${e.originalBox.top}px`,left:`${e.originalBox.left+e.originalBox.width}px`,width:`calc(100% - ${e.originalBox.left+e.originalBox.width}px)`,height:`${e.originalBox.height}px`,backgroundColor:`rgba(0, 0, 0, ${e.config.backgroundOpacity?e.config.backgroundOpacity:.9})`}),ref:"tip_box"},null,4)],4),u("div",{class:"bottom",style:h({height:`calc(100% - ${e.originalBox.top}px - ${e.originalBox.height}px)`,backgroundColor:`rgba(0, 0, 0, ${e.config.backgroundOpacity?e.config.backgroundOpacity:.9})`})},null,4)])):D("v-if",!0)]),_:3})}b.render=ut,b.__scopeId="data-v-5033ea2c",b.__file="packages/components/introStep/introStep.vue",b.install=e=>{e.component(b.name,b)};var S=P({name:"GAInput",setup(){return{}}});const st={type:"text",class:"ele-input"};function ct(e,n,t,a,r,i){return B(),_("input",st)}S.render=ct,S.__file="packages/components/input/input.vue",S.install=e=>{e.component(S.name,S)};const dt={class:"esign-wrapper"},pt=["width","height"],ft={className:"sign-btnWrap"};var C=P({__name:"sign",props:{width:{type:Number,required:!1,default:400},height:{type:Number,required:!1,default:200},lineWidth:{type:Number,required:!1,default:4},strokeColor:{type:String,required:!1,default:"green"},lineCap:{type:String,required:!1,default:"round"},lineJoin:{type:String,required:!1,default:"round"},bgColor:{type:String,required:!1,default:"transparent"},showBtn:{type:Boolean,required:!1,default:!0},onSave:{type:Function,required:!1},onClear:{type:Function,required:!1},onDrawEnd:{type:Function,required:!1}},setup(e){const n=e,{width:t,height:a,lineWidth:r,strokeColor:i,lineCap:o,lineJoin:s,bgColor:d,showBtn:m,onSave:l,onClear:v,onDrawEnd:f}=n,c=j(null),p=j(null),x=j({offsetX:0,offsetY:0,endX:0,endY:0}),k=/Mobile|Android|iPhone/i.test(navigator.userAgent),le=()=>{c.value&&(c.value.getContext("2d").clearRect(0,0,t,a),v&&v(c.value))},ae=()=>{c.value.toBlob(g=>{const y=Date.now().toString(),w=document.createElement("a");w.download=`${y}.png`,w.href=URL.createObjectURL(g),w.click(),w.remove(),l&&l(g)})},Y=g=>{const{pageX:y,pageY:w}=k?g.changedTouches[0]:g,N=c.value,{x:F,y:G}=N.getBoundingClientRect();x.value.endX=y,x.value.endY=w,p.value.lineTo(y-F,w-G),p.value.stroke()},z=g=>{const{offsetX:y,offsetY:w,pageX:N,pageY:F}=k?g.changedTouches[0]:g,G=c.value,{x:pe,y:fe}=G.getBoundingClientRect();x.value.offsetX=y,x.value.offsetY=w,x.value.endX=N,x.value.endY=F,p.value.beginPath(),p.value.lineWidth=r,p.value.strokeStyle=i,p.value.lineCap=o,p.value.lineJoin=s,p.value.moveTo(x.value.endX-pe,x.value.endY-fe),window.addEventListener(k?"touchmove":"mousemove",Y)},W=()=>{console.log(p.value),p.value.closePath(),window.removeEventListener("mousemove",Y),f&&f(c.current)},ue=()=>{const g=c.value;g.width=t,g.height=a;const y=g.getContext("2d");p.value=y,p.value.fillStyle=d,p.value.fillRect(0,0,t,a)},se=()=>{window.addEventListener(k?"touchstart":"mousedown",z),window.addEventListener(k?"touchend":"mouseup",W)},ce=()=>{window.removeEventListener(k?"touchstart":"mousedown",z),window.removeEventListener(k?"touchend":"mouseup",W)},de=()=>{ue(),se()};return U(()=>{de()}),Be(()=>{ce()}),(g,y)=>(B(),_("div",dt,[u("canvas",{ref_key:"canvasRef",ref:c,width:L(t),height:L(a),style:{border:"1px solid #ccc"}},null,8,pt),$e(u("div",ft,[u("span",{onClick:le,className:"sign-btn"},"\u6E05\u9664"),u("span",{onClick:ae,className:"sign-btn primary"},"\u4FDD\u5B58")],512),[[Ee,L(m)]])]))}});C.__scopeId="data-v-0772085a",C.__file="packages/components/sign/sign.vue",C.install=e=>{e.component("GaSign",C)};const gt={GAButton:$,GALink:E,GAIntroStep:b,GAInpput:S,GASign:C};var vt={version(){return"1.0.2-rc.2"},install(e){Object.values(gt).forEach(n=>{e.use(n)})}};export{$ as GAButton,S as GAInpput,b as GAIntroStep,E as GALink,C as GASign,vt as default};
